{"version":3,"file":"query.js","sources":["../src/globals/use.ts","../src/globals/extend.ts","../src/core/is.ts","../src/core/createQuery.ts","../node_modules/@amoy/query-event/dist/query-event.js","../src/core/index.ts"],"sourcesContent":["export const fns = []\n\nexport function use(fn: () => void) {\n    fns.push(fn)\n}","export function extend(target: any = []) {\n    if (Array.isArray(target)) {\n        target.map((item) => extend.bind(this)(item))\n    } else if (typeof target === 'object') {\n        Object.assign(this.prototype, target)\n    } else {\n        console.error(`query extension's type must be \"object\" or \"object[]\"`)\n    }\n}","export function sprite(target: any) {\n    return typeof target._anchor !== 'undefined' && typeof target._font === 'undefined'\n}\n\nexport function text(target: any) {\n    return typeof target._font === 'string'\n}\n\nexport function container(target: any) {\n    return typeof target.anchor === 'undefined'\n}","import * as is from './is'\nimport { fns } from '../globals/use'\nimport { IQuery } from '../types'\n\nexport function createQuery(stage: any, query: IQuery) {\n    return (selector: any) => {\n        const com = []\n        // @ts-ignore\n        const any = fns.reduce((prev: any, current: any) => current(prev, query), selector)\n        const type = typeof any\n\n        switch (type) {\n            case 'string':\n                selector = any.trim()\n                if (['container', 'sprite', 'text'].includes(selector)) {\n                    com.push(...getTypedItem(selector, get(stage)))\n                } else {\n                    const parsed = parseStringQuery(selector)\n                    parsed.map((item) => com.push(...findBy(item.key, item.value, get(stage))))\n                }\n                break\n            case 'object':\n                com.push(any)\n                break\n            default:\n                break\n        }\n\n        return Object.assign(com, query.prototype)\n    }\n}\n\nconst REG_PROP = /\\[(.*)\\=(.*)\\]/ // 匹配 `[${key}=${value}]` 形式字符串\n\nfunction parseStringQuery(query: string = '') {\n    const result = []\n    query.split(',').map((query: string) => {\n        query = query.trim()\n        if (query.startsWith('.')) {\n            result.push({\n                key: 'name',\n                value: query.slice(1),\n            })\n        }\n        if (REG_PROP.test(query)) {\n            const [key, value] = parsePropQuery(query)\n            result.push({\n                key,\n                value,\n            })\n        }\n    })\n    return result\n}\n\nfunction getTypedItem(type: string, source: any[]) {\n    return source.filter((item) => is[type](item))\n}\n\nfunction parsePropQuery(string: string) {\n    const [_, key, value] = string.match(REG_PROP)\n    return [key, value]\n}\n\nfunction get(object: any) {\n    const result = []\n    const walk = (object: any) => {\n        if (object.children.length > 0) {\n            result.push(...object.children)\n            object.children.map((child: any) => walk(child))\n        }\n    }\n    walk(object)\n    return result\n}\n\nfunction find(item: any, array: any[]) {\n    return array.filter((_item) => _item === item)\n}\n\nfunction findBy(key: string, value: any, array: any[]) {\n    return array.filter((item) => item[key] === value)\n}","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.queryEvent = {}));\n}(this, function (exports) { 'use strict';\n\n    var EventBus = /** @class */ (function () {\n        function EventBus() {\n            this.handlers = [];\n        }\n        EventBus.prototype.add = function (handler) {\n            this.handlers.push(handler);\n            return this;\n        };\n        EventBus.prototype.del = function (handler) {\n            var _this = this;\n            if (!handler) {\n                this.handlers = [];\n            }\n            else {\n                this.handlers.map(function (value, index) {\n                    value === handler && _this.handlers.splice(index, 1);\n                });\n            }\n            return this;\n        };\n        EventBus.prototype.fire = function (evObj) {\n            if (!this.handlers || !this.handlers.length)\n                return;\n            this.handlers.map(function (handler) {\n                if (typeof handler === 'function')\n                    handler(evObj);\n            });\n            return this;\n        };\n        EventBus.prototype.clear = function () {\n            this.handlers = [];\n        };\n        return EventBus;\n    }());\n\n    function type(object) {\n        var class2type = {};\n        var type = class2type.toString.call(object);\n        var typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol';\n        if (object == null)\n            return object + '';\n        typeString.split(' ').forEach(function (type) {\n            class2type[\"[object \" + type + \"]\"] = type.toLowerCase();\n        });\n        var isObject = typeof object === 'object';\n        var isFn = typeof object === 'function';\n        return isObject || isFn ? class2type[type] || 'object' : typeof object;\n    }\n\n    var get = function (root, get) {\n        if (type(root) !== 'object')\n            return root;\n        var value = root;\n        var keyArr = get.split('.');\n        for (var i = 0, l = keyArr.length; i < l; i++) {\n            var v = keyArr[i];\n            if (v) {\n                if (value[v]) {\n                    value = value[v];\n                }\n                else {\n                    value = undefined;\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n\n    var u = {\n        getFingers: function (ev) {\n            return get(ev, 'data.originalEvent.touches.length') || 1;\n        },\n        getPoint: function (ev, index) {\n            if (ev.data.pointerType === 'touch') {\n                var touches = ev.data.originalEvent.touches;\n                return {\n                    x: Math.round(touches[index].pageX),\n                    y: Math.round(touches[index].pageY)\n                };\n            }\n            else {\n                return {\n                    x: Math.round(ev.data.global.x),\n                    y: Math.round(ev.data.global.y)\n                };\n            }\n        },\n        getVector: function (p1, p2) {\n            var x = Math.round(p1.x - p2.x);\n            var y = Math.round(p1.y - p2.y);\n            return { x: x, y: y };\n        },\n        getLength: function (v1) {\n            return Math.sqrt(v1.x * v1.x + v1.y * v1.y);\n        },\n        getAngle: function (v1, v2) {\n            if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n                console.error('getAngle error!');\n                return;\n            }\n            // 判断方向，顺时针为 1 ,逆时针为 -1；\n            var direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1 : -1;\n            // 两个向量的模；\n            var len1 = this.getLength(v1);\n            var len2 = this.getLength(v2);\n            var mr = len1 * len2;\n            var dot;\n            var r;\n            if (mr === 0)\n                return 0;\n            // 通过数量积公式可以推导出：\n            // cos = (x1 * x2 + y1 * y2)/(|a| * |b|);\n            dot = v1.x * v2.x + v1.y * v2.y;\n            r = dot / mr;\n            if (r > 1)\n                r = 1;\n            if (r < -1)\n                r = -1;\n            // 解值并结合方向转化为角度值；\n            return Math.acos(r) * direction;\n        },\n        getAnchorPoint: function (target) {\n            return {\n                x: target.x,\n                y: target.y\n            };\n        }\n    };\n\n    var RTOUCH_SUPPORT_EVENT = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        // 拖动\n        'drag',\n        'dragstart',\n        'dragend',\n        // 双指缩放\n        'pinch',\n        'pinchstart',\n        'pinchend',\n        // 双指旋转\n        'rotate',\n        'rotatestart',\n        'rotateend',\n        // 划动\n        'swipeleft',\n        'swiperight',\n        'swipeup',\n        'swipedown',\n        // 短点击\n        'shorttap',\n        'longtap',\n        // 单指缩放\n        'singlepinch',\n        'singlepinchstart',\n        'singlepinchend',\n        // 单指旋转\n        'singlerotate',\n        'singlerotatestart',\n        'singlerotateend',\n    ];\n    // 挟持的原生事件\n    var ORIGIN_EVENT_MAP = [{\n            name: 'pointerdown',\n            fn: '_start'\n        }, {\n            name: 'pointermove',\n            fn: '_move'\n        }, {\n            name: 'pointerup',\n            fn: '_end'\n        }, {\n            name: 'pointerupoutside',\n            fn: '_end'\n        }];\n    // 事件中心\n    var RTouch = /** @class */ (function () {\n        function RTouch(target) {\n            // 触摸手指数量\n            this.fingers = 0;\n            // 是否开始触摸\n            // 用于解决 精灵区域外 move 也被触发的问题\n            this.touching = false;\n            this.Bus = {};\n            this.target = target;\n            // 初始化事件中心\n            this.initEventBus();\n            // 事件挟持\n            this.bindOriginEvent();\n        }\n        RTouch.prototype.initEventBus = function () {\n            var _this = this;\n            RTOUCH_SUPPORT_EVENT.map(function (evName) {\n                Object.defineProperty(_this.Bus, evName, { value: new EventBus() });\n            });\n        };\n        RTouch.prototype.bindOriginEvent = function () {\n            var _this = this;\n            ORIGIN_EVENT_MAP.map(function (_a) {\n                var name = _a.name, fn = _a.fn;\n                _this.target.interactive = true;\n                _this.target.on(name, _this[fn], _this);\n            });\n        };\n        RTouch.prototype._start = function (ev) {\n            this.touching = true;\n            this.startTime = Date.now();\n            this.fingers = u.getFingers(ev);\n            this.singleBasePoint = u.getAnchorPoint(this.target);\n            // 记录第一触控点\n            this.swipeStartPoint = this.startPoint = u.getPoint(ev, 0);\n            if (this.fingers === 1) {\n                // 单指且监听 singlePinch 时，计算向量模；\n                var startVector = u.getVector(this.startPoint, this.singleBasePoint);\n                this.singlePinchStartLength = u.getLength(startVector);\n            }\n            else if (this.fingers > 1) {\n                // 双指操作时，记录第二触控点\n                this.secondPoint = u.getPoint(ev, 1);\n                // 计算双指向量；\n                this.vector1 = u.getVector(this.secondPoint, this.startPoint);\n                // 计算向量模\n                this.pinchStartLength = u.getLength(this.vector1);\n            }\n            this.fireEvent('touchstart', {\n                origin: ev\n            });\n        };\n        RTouch.prototype._move = function (ev) {\n            if (!this.touching)\n                return;\n            var curPoint = u.getPoint(ev, 0);\n            if (!this.startPoint)\n                this.startPoint = curPoint;\n            if (this.fingers > 1) {\n                // 双指操作， 触发 pinch 与 rotate\n                var curSecPoint = u.getPoint(ev, 1);\n                var vector2 = u.getVector(curSecPoint, curPoint);\n                var pinchLength = u.getLength(vector2);\n                if (this.pinchStartLength) {\n                    this.eventStart('pinch', {\n                        origin: ev,\n                        delta: {\n                            scale: pinchLength / this.pinchStartLength\n                        }\n                    });\n                    this.pinchStartLength = pinchLength;\n                }\n                if (this.vector1) {\n                    this.eventStart('rotate', {\n                        delta: {\n                            rotate: u.getAngle(this.vector1, vector2)\n                        },\n                        origin: ev\n                    });\n                    this.vector1 = vector2;\n                }\n            }\n            // 触发 drag\n            this.eventStart('drag', {\n                delta: {\n                    x: curPoint.x - this.startPoint.x,\n                    y: curPoint.y - this.startPoint.y\n                },\n                origin: ev\n            });\n            this.fireEvent('touchmove', {\n                origin: ev\n            });\n            this.startPoint = curPoint;\n        };\n        RTouch.prototype._end = function (ev) {\n            var _this = this;\n            var evArr = ['pinch', 'drag', 'rotate', 'singlerotate', 'singlepinch'];\n            this.touching = false;\n            this.fingers = u.getFingers(ev);\n            evArr.map(function (evName) {\n                _this.eventEnd(evName, {\n                    origin: ev,\n                    type: evName\n                });\n            });\n            if (this.swipeStartPoint) {\n                var endPoint = {\n                    x: Math.round(ev.data.global.x),\n                    y: Math.round(ev.data.global.y)\n                };\n                var deltaX = endPoint.x - this.swipeStartPoint.x;\n                var deltaY = endPoint.y - this.swipeStartPoint.y;\n                var endTime = Date.now();\n                var eventType = '';\n                if (deltaX > 30 && Math.abs(deltaY) < 100) {\n                    // 右划\n                    eventType = 'swiperight';\n                }\n                else if (deltaX < -30 && Math.abs(deltaY) < 100) {\n                    // 左划\n                    eventType = 'swipeleft';\n                }\n                else if (deltaY > 30 && Math.abs(deltaX) < 100) {\n                    // 下划\n                    eventType = 'swipedown';\n                }\n                else if (deltaY < -30 && Math.abs(deltaX) < 100) {\n                    // 上划\n                    eventType = 'swipeup';\n                }\n                else if (Math.abs(deltaX) < 30 && Math.abs(deltaY) < 30) {\n                    if (endTime - this.startTime < 500) {\n                        // 触发短点击\n                        eventType = 'shorttap';\n                    }\n                    else {\n                        // 触发长按\n                        eventType = 'longtap';\n                    }\n                }\n                if (eventType) {\n                    this.fireEvent(eventType, {\n                        origin: ev\n                    });\n                }\n            }\n            this.fireEvent('touchend', {\n                origin: ev\n            });\n        };\n        RTouch.prototype.fireEvent = function (evName, ev) {\n            if (this.Bus[evName]) {\n                this.Bus[evName].fire(Object.assign(ev, {\n                    type: evName,\n                    stopPropagation: function () {\n                        ev.origin.stopPropagation();\n                    }\n                }));\n            }\n        };\n        RTouch.prototype.destory = function () {\n            var _this = this;\n            ORIGIN_EVENT_MAP.map(function (_a) {\n                var name = _a.name, fn = _a.fn;\n                _this.target.off(name, _this[fn], _this);\n            });\n        };\n        RTouch.prototype.eventStart = function (evName, ev) {\n            var ing = evName + \"ing\";\n            var start = evName + \"start\";\n            if (!this[ing]) {\n                this.fireEvent(start, ev);\n                this[ing] = true;\n            }\n            else {\n                this.fireEvent(evName, ev);\n            }\n        };\n        RTouch.prototype.eventEnd = function (evName, ev) {\n            var ing = evName + \"ing\";\n            var end = evName + \"end\";\n            if (this[ing]) {\n                ev.type = end;\n                this.fireEvent(end, ev);\n                this[ing] = false;\n            }\n        };\n        RTouch.prototype.on = function (evName, handler) {\n            var _this = this;\n            var _evName = evName.trim().toLowerCase();\n            _evName.split(' ').map(function (name) {\n                _this.Bus[name].add(handler);\n            });\n            return this;\n        };\n        RTouch.prototype.off = function (evName, handler) {\n            var _this = this;\n            var _evName = evName.trim().toLowerCase();\n            _evName.split(' ').map(function (name) {\n                handler ? _this.Bus[name].del(handler) : _this.Bus[name].clear();\n            });\n            return this;\n        };\n        return RTouch;\n    }());\n\n    function bind(target, evName, fn) {\n        if (RTOUCH_SUPPORT_EVENT.includes(evName)) {\n            if (!target['RTouch'])\n                target['RTouch'] = new RTouch(target);\n            target['RTouch'].on(evName, fn);\n        }\n        else {\n            target.interactive = true;\n            target.on(evName, fn);\n        }\n    }\n    function off(target, evName, fn) {\n        if (RTOUCH_SUPPORT_EVENT.includes(evName) && target['RTouch']) {\n            target['RTouch'].off(evName, fn);\n        }\n        else {\n            target.interactive = true;\n            target.off(evName, fn);\n        }\n    }\n    var event = {\n        on: function (name, closure) {\n            if (name === void 0) { name = ''; }\n            if (closure === void 0) { closure = function () { }; }\n            var events = name.split(' ');\n            for (var i = 0; i < this.length; i++) {\n                for (var j = 0; j < events.length; j++) {\n                    this[i].interactive = true;\n                    bind(this[i], events[j], closure);\n                }\n            }\n            return this;\n        },\n        off: function (name) {\n            if (name === void 0) { name = ''; }\n            var events = name.split(' ');\n            for (var i = 0; i < this.length; i++) {\n                for (var j = 0; j < events.length; j++) {\n                    this[i].off(events[j]);\n                    off(this[i], events[j]);\n                }\n            }\n            return this;\n        }\n    };\n    // @ts-ignore\n    if (window.query)\n        window.query.extend(event);\n\n    exports.default = event;\n    exports.event = event;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=query-event.js.map\n","import { use, extend } from '../globals'\nimport { createQuery } from './createQuery'\nimport queryEvent from '@amoy/query-event'\nimport { IQuery } from '../types'\n\n// @ts-ignore\nexport const query: IQuery = (stage: any) => window.$ = createQuery(stage, query)\n\nquery.use = use\nquery.extend = extend\n\nquery.extend([\n    queryEvent,\n])"],"names":["this","queryEvent"],"mappings":"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"}