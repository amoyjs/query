{"version":3,"file":"query.js","sources":["../lib/instance/index.ts","../lib/globals/use.ts","../lib/globals/extend.ts","../lib/core/is.ts","../lib/core/createQuery.ts","../lib/core/index.ts"],"sourcesContent":["/**\n * show\n * \n * show the selected item\n *\n * @module query/show\n *\n * @example\n *\n * $('text').show()\n */\nexport function show(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].visible = true\n    }\n    return this\n}\n\n/**\n * hide\n *\n * hide the selected item\n *\n * @module query/hide\n *\n * @example\n *\n * $('text').hide()\n */\nexport function hide(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].visible = false\n    }\n    return this\n}\n\n/**\n * get\n * \n * get item by index or get a collection for selected items\n * \n * @module query/get\n * \n * @param index\n *\n * @example\n *\n * $('text').get()\n * // or\n * $('text').get(0)\n */\nexport function get(this: any, index: number) {\n    if (index) {\n        return this[index]\n    } else {\n        const pure: any[] = []\n        for (let i = 0; i < this.length; i++) {\n            pure.push(this[i])\n        }\n        return pure\n    }\n}\n\n/**\n * width\n * \n * if param `width` is type of number,\n * `width()` will set selected items' width property\n * else return the first selected item's width value\n * \n * @module query/width\n * \n * @param { Number } width\n *\n * @example\n *\n * $('text').width()\n */\nexport function width(this: any, width: number) {\n    if (typeof width === 'number') {\n        for (let i = 0; i < this.length; i++) {\n            this[i].width = width\n        }\n    } else {\n        return this[0].width\n    }\n}\n\n/**\n * height\n *\n * if param `height` is type of number,\n * `height()` will set selected items' height property\n * else return the first selected item's height value\n * \n * @module query/height\n *\n * @param { Number } height\n *\n * @example\n *\n * $('text').height()\n */\nexport function height(this: any, height: number) {\n    if (typeof height === 'number') {\n        for (let i = 0; i < this.length; i++) {\n            this[i].height = height\n        }\n    } else {\n        return this[0].height\n    }\n}\n\n/**\n * position\n * \n * return the first selected item's coordanites\n * \n * @module query/position\n *\n * @example\n *\n * $('text').position()\n */\nexport function position(this: any) {\n    if (this[0]) {\n        return {\n            x: this[0].x,\n            y: this[0].y,\n        }\n    } else {\n        return null\n    }\n}\n\n/**\n * children\n * \n * return the first selected item's children\n * \n * @module query/children\n *\n * @example\n *\n * $('text').children()\n */\nexport function children(this: any) {\n    return this[0] ? this[0].children : []\n}\n\n/**\n * count\n * \n * return the selected items' count\n * \n * @module query/count\n *\n * @example\n *\n * $('text').count()\n */\nexport function count(this: any) {\n    return this.length\n}\n\n/**\n * first\n *\n * return the first selected item\n * \n * @module query/first\n *\n * @example\n *\n * $('text').first()\n *\n * @example\n *\n * $('text').first()\n */\nexport function first(this: any) {\n    return this[0]\n}\n\n/**\n * last\n *\n * return the last selected item\n * \n * @module query/last\n *\n * @example\n *\n * $('text').last()\n */\nexport function last(this: any) {\n    return this[this.length - 1]\n}\n\n/**\n * each\n * \n * @module query/each\n * \n * @param { Function } closure - executeable functoin\n *\n * @example\n *\n * $('text').each(item => {\n *     $(item).hide()\n * })\n */\nexport function each(this: any, closure: (item: any, index: number) => void) {\n    for (let i = 0; i < this.length; i++) {\n        closure(this[i], i)\n    }\n}\n\n/**\n * empty\n * \n * remove the selected items' children\n * \n * @module query/empty\n *\n * @example\n *\n * $('text').empty()\n */\nexport function empty(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].removeChildren()\n    }\n}\n\n/**\n * parent\n * \n * if the first selected item's parent exist, return it, else return `null`\n * \n * @module query/parent\n * \n * @example\n * \n * $('text').parent()\n */\nexport function parent(this: any) {\n    return this[0] ? this[0].parent : null\n}\n\nexport function attr(this: any, key: string, value?: any) {\n    if (this[0] ) {  \n        if (value) {\n            this[0][key] = value\n            return this[0]\n        } else {\n            return this[0][key]\n        }\n    }\n} \n\nexport function find() {\n    console.log('find() not support yet')\n}\n\nexport function prev(this: any) {\n    if (this[0] && this[0].parent && this[0].parent.children.length) {\n        return this[0].parent.children.filter((v, i) => {\n            if (v === this[0]) {\n                return this[0].parent.children[i - 1]\n            }\n        })[0]\n    }\n}\n\nexport function next(this: any) {\n    if (this[0] && this[0].parent && this[0].parent.children.length) {\n        return this[0].parent.children.filter((v, i) => {\n            if (v === this[0]) {\n                return this[0].parent.children[i + 1]\n            }\n        })[0]\n    }\n}\n","export const fns: any[] = []\n\nexport function use(fn: () => void) {\n    fns.push(fn)\n}\n","/**\n * extend\n * \n * query extend method\n * \n * @module query/extend\n * \n * @param { Object | Array } target - extend target\n * \n * @example\n * \n * import query from '@amoy/query'\n * \n * query.extend({\n *     hide() {\n *         for (let i = 0; i < this.length; i++) {\n *             // hide all the selected items\n *             this[i].visible = false\n *         }\n *     },\n * })\n * \n * $('some query').hide()\n */\nexport function extend(this: any, target: any = []) {\n    if (Array.isArray(target)) {\n        target.map((item) => extend.bind(this)(item))\n    } else if (typeof target === 'object') {\n        Object.assign(this.prototype, target)\n    } else {\n        console.error(`query extension's type must be \"object\" or \"object[]\"`)\n    }\n}\n","export function sprite(target: any) {\n    return typeof target._anchor !== 'undefined' && typeof target._font === 'undefined'\n}\n\nexport function text(target: any) {\n    return typeof target._font === 'string'\n}\n\nexport function container(target: any) {\n    return typeof target.anchor === 'undefined'\n}\n","import * as is from './is'\nimport { fns } from '../globals/use'\n\nexport function createQuery(stage: any, query: typeof $) {\n    return (selector: any) => {\n        const com: any[] = []\n        const any = fns.reduce((prev: any, current: any) => current(prev, query), selector)\n        const type = typeof any\n\n        switch (type) {\n            case 'string':\n                selector = any.trim()\n                if (['view', 'sprite', 'text'].includes(selector)) {\n                    com.push(...getTypedItem(selector, get(stage)))\n                } else {\n                    const parsed = parseStringQuery(selector)\n                    parsed.map((item: any) => com.push(...findBy(item.key, item.value, get(stage))))\n                }\n                break\n            case 'object':\n                com.push(any)\n                break\n            default:\n                break\n        }\n\n        return Object.assign(com, query.prototype)\n    }\n}\n\nconst REG_PROP = /\\[(.*)\\=(.*)\\]/ // 匹配 `[${key}=${value}]` 形式字符串\n\nfunction parseStringQuery(query: string = '') {\n    const result: any[] = []\n    query.split(',').map((query: string) => {\n        query = query.trim()\n        const selectTypes = {\n            '#': ['id'],\n            '.': ['className', 'class', 'classname'],\n        }\n        for (const key in selectTypes) {\n            if (query.startsWith(key)) {\n                selectTypes[key].map((attrName) => {\n                    result.push({\n                        key: attrName,\n                        value: query.slice(1),\n                    })\n                })\n            }\n        }\n        if (REG_PROP.test(query)) {\n            const [key, value] = parsePropQuery(query)\n            result.push({\n                key,\n                value,\n            })\n        }\n    })\n    return result\n}\n\nfunction getTypedItem(type: string, source: any[]) {\n    return source.filter((item) => is[type](item))\n}\n\nfunction parsePropQuery(string: string) {\n    const [_, key, value] = string.match(REG_PROP) as any\n    return [key, value]\n}\n\nfunction get(object: any) {\n    const result: any[] = []\n    const walk = (object: any) => {\n        if (object.children.length > 0) {\n            result.push(...object.children)\n            object.children.map((child: any) => walk(child))\n        }\n    }\n    walk(object)\n    return result\n}\n\nfunction find(item: any, array: any[]) {\n    return array.filter((_item) => _item === item)\n}\n\nfunction findBy(key: string, value: any, array: any[]) {\n    return array.filter((item) => {\n        if (typeof item[key] === 'string') {\n            const vals = item[key].split(' ')\n            return vals.includes(value)\n        } else {\n            return item[key] === value \n        }\n    })\n}\n","import * as instance from '../instance'\nimport { use, extend } from '../globals'\nimport { createQuery } from './createQuery'\nimport queryEvent from '@amoy/query-event'\n\nexport const query = (stage: any) => window.$ = createQuery(stage, query)\nquery.use = use\nquery.extend = extend\n\nquery.extend([\n    queryEvent,\n    instance,\n])\n"],"names":["get"],"mappings":"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"}