{"version":3,"file":"query.es.js","sources":["../lib/instance/index.ts","../lib/globals/use.ts","../lib/globals/extend.ts","../lib/core/is.ts","../lib/core/createQuery.ts","../node_modules/@amoy/common/dist/common.es.js","../node_modules/@amoy/query-event/dist/query-event.es.js","../lib/core/index.ts"],"sourcesContent":["/**\n * show\n * \n * show the selected item\n *\n * @module query/show\n *\n * @example\n *\n * $('text').show()\n */\nexport function show(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].visible = true\n    }\n    return this\n}\n\n/**\n * hide\n *\n * hide the selected item\n *\n * @module query/hide\n *\n * @example\n *\n * $('text').hide()\n */\nexport function hide(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].visible = false\n    }\n    return this\n}\n\n/**\n * get\n * \n * get item by index or get a collection for selected items\n * \n * @module query/get\n * \n * @param index\n *\n * @example\n *\n * $('text').get()\n * // or\n * $('text').get(0)\n */\nexport function get(this: any, index: number) {\n    if (index) {\n        return this[index]\n    } else {\n        const pure: any[] = []\n        for (let i = 0; i < this.length; i++) {\n            pure.push(this[i])\n        }\n        return pure\n    }\n}\n\n/**\n * width\n * \n * if param `width` is type of number,\n * `width()` will set selected items' width property\n * else return the first selected item's width value\n * \n * @module query/width\n * \n * @param { Number } width\n *\n * @example\n *\n * $('text').width()\n */\nexport function width(this: any, width: number) {\n    if (typeof width === 'number') {\n        for (let i = 0; i < this.length; i++) {\n            this[i].width = width\n        }\n    } else {\n        return this[0].width\n    }\n}\n\n/**\n * height\n *\n * if param `height` is type of number,\n * `height()` will set selected items' height property\n * else return the first selected item's height value\n * \n * @module query/height\n *\n * @param { Number } height\n *\n * @example\n *\n * $('text').height()\n */\nexport function height(this: any, height: number) {\n    if (typeof height === 'number') {\n        for (let i = 0; i < this.length; i++) {\n            this[i].height = height\n        }\n    } else {\n        return this[0].height\n    }\n}\n\n/**\n * position\n * \n * return the first selected item's coordanites\n * \n * @module query/position\n *\n * @example\n *\n * $('text').position()\n */\nexport function position(this: any) {\n    if (this[0]) {\n        return {\n            x: this[0].x,\n            y: this[0].y,\n        }\n    } else {\n        return null\n    }\n}\n\n/**\n * children\n * \n * return the first selected item's children\n * \n * @module query/children\n *\n * @example\n *\n * $('text').children()\n */\nexport function children(this: any) {\n    return this[0] ? this[0].children : []\n}\n\n/**\n * count\n * \n * return the selected items' count\n * \n * @module query/count\n *\n * @example\n *\n * $('text').count()\n */\nexport function count(this: any) {\n    return this.length\n}\n\n/**\n * first\n *\n * return the first selected item\n * \n * @module query/first\n *\n * @example\n *\n * $('text').first()\n *\n * @example\n *\n * $('text').first()\n */\nexport function first(this: any) {\n    return this[0]\n}\n\n/**\n * last\n *\n * return the last selected item\n * \n * @module query/last\n *\n * @example\n *\n * $('text').last()\n */\nexport function last(this: any) {\n    return this[this.length - 1]\n}\n\n/**\n * each\n * \n * @module query/each\n * \n * @param { Function } closure - executeable functoin\n *\n * @example\n *\n * $('text').each(item => {\n *     $(item).hide()\n * })\n */\nexport function each(this: any, closure: (item: any, index: number) => void) {\n    for (let i = 0; i < this.length; i++) {\n        closure(this[i], i)\n    }\n}\n\n/**\n * empty\n * \n * remove the selected items' children\n * \n * @module query/empty\n *\n * @example\n *\n * $('text').empty()\n */\nexport function empty(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].removeChildren()\n    }\n}\n\n/**\n * parent\n * \n * if the first selected item's parent exist, return it, else return `null`\n * \n * @module query/parent\n * \n * @example\n * \n * $('text').parent()\n */\nexport function parent(this: any) {\n    return this[0] ? this[0].parent : null\n}\n\nexport function attr(this: any, key: string, value?: any) {\n    if (this[0] ) {  \n        if (value) {\n            this[0][key] = value\n            return this[0]\n        } else {\n            return this[0][key]\n        }\n    }\n} \n\nexport function find() {\n    console.log('find() not support yet')\n}\n\nexport function prev(this: any) {\n    if (this[0] && this[0].parent && this[0].parent.children.length) {\n        return this[0].parent.children.filter((v, i) => {\n            if (v === this[0]) {\n                return this[0].parent.children[i - 1]\n            }\n        })[0]\n    }\n}\n\nexport function next(this: any) {\n    if (this[0] && this[0].parent && this[0].parent.children.length) {\n        return this[0].parent.children.filter((v, i) => {\n            if (v === this[0]) {\n                return this[0].parent.children[i + 1]\n            }\n        })[0]\n    }\n}\n","export const fns: any[] = []\n\nexport function use(fn: () => void) {\n    fns.push(fn)\n}\n","/**\n * extend\n * \n * query extend method\n * \n * @module query/extend\n * \n * @param { Object | Array } target - extend target\n * \n * @example\n * \n * import query from '@amoy/query'\n * \n * query.extend({\n *     hide() {\n *         for (let i = 0; i < this.length; i++) {\n *             // hide all the selected items\n *             this[i].visible = false\n *         }\n *     },\n * })\n * \n * $('some query').hide()\n */\nexport function extend(this: any, target: any = []) {\n    if (Array.isArray(target)) {\n        target.map((item) => extend.bind(this)(item))\n    } else if (typeof target === 'object') {\n        Object.assign(this.prototype, target)\n    } else {\n        console.error(`query extension's type must be \"object\" or \"object[]\"`)\n    }\n}\n","export function sprite(target: any) {\n    return typeof target._anchor !== 'undefined' && typeof target._font === 'undefined'\n}\n\nexport function text(target: any) {\n    return typeof target._font === 'string'\n}\n\nexport function container(target: any) {\n    return typeof target.anchor === 'undefined'\n}\n","import * as is from './is'\nimport { fns } from '../globals/use'\n\nexport function createQuery(stage: any, query: typeof $) {\n    return (selector: any) => {\n        const com: any[] = []\n        const any = fns.reduce((prev: any, current: any) => current(prev, query), selector)\n        const type = typeof any\n\n        switch (type) {\n            case 'string':\n                selector = any.trim()\n                if (['view', 'sprite', 'text'].includes(selector)) {\n                    com.push(...getTypedItem(selector, get(stage)))\n                } else {\n                    const parsed = parseStringQuery(selector)\n                    parsed.map((item: any) => com.push(...findBy(item.key, item.value, get(stage))))\n                }\n                break\n            case 'object':\n                com.push(any)\n                break\n            default:\n                break\n        }\n\n        return Object.assign(com, query.prototype)\n    }\n}\n\nconst REG_PROP = /\\[(.*)\\=(.*)\\]/ // 匹配 `[${key}=${value}]` 形式字符串\n\nfunction parseStringQuery(query: string = '') {\n    const result: any[] = []\n    query.split(',').map((query: string) => {\n        query = query.trim()\n        const selectTypes = {\n            '#': ['id'],\n            '.': ['className', 'class', 'classname'],\n        }\n        for (const key in selectTypes) {\n            if (query.startsWith(key)) {\n                selectTypes[key].map((attrName) => {\n                    result.push({\n                        key: attrName,\n                        value: query.slice(1),\n                    })\n                })\n            }\n        }\n        if (REG_PROP.test(query)) {\n            const [key, value] = parsePropQuery(query)\n            result.push({\n                key,\n                value,\n            })\n        }\n    })\n    return result\n}\n\nfunction getTypedItem(type: string, source: any[]) {\n    return source.filter((item) => is[type](item))\n}\n\nfunction parsePropQuery(string: string) {\n    const [_, key, value] = string.match(REG_PROP) as any\n    return [key, value]\n}\n\nfunction get(object: any) {\n    const result: any[] = []\n    const walk = (object: any) => {\n        if (object.children.length > 0) {\n            result.push(...object.children)\n            object.children.map((child: any) => walk(child))\n        }\n    }\n    walk(object)\n    return result\n}\n\nfunction find(item: any, array: any[]) {\n    return array.filter((_item) => _item === item)\n}\n\nfunction findBy(key: string, value: any, array: any[]) {\n    return array.filter((item) => {\n        if (typeof item[key] === 'string') {\n            const vals = item[key].split(' ')\n            return vals.includes(value)\n        } else {\n            return item[key] === value \n        }\n    })\n}\n","function eventify(target) {\n    target.callbacks = {};\n    target.on = function (eventName, callback) {\n        if (!eventName || !callback)\n            return target;\n        if (!target.hasOwnProperty(\"callbacks\"))\n            target.callbacks || (target.callbacks = {});\n        var base;\n        var events = eventName.split(\" \");\n        events.map(function (eventName) {\n            (base = target.callbacks)[eventName] || (base[eventName] = []);\n            target.callbacks[eventName].push(callback);\n        });\n        return target;\n    };\n    target.emit = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var eventName = args.shift();\n        var events = eventName.split(\" \");\n        events.map(function (eventName) {\n            var list = target.callbacks !== null ? target.callbacks[eventName] || [] : [];\n            if (list.length) {\n                list.map(function (item) {\n                    item && item.apply(target, args);\n                });\n            }\n        });\n        return target;\n    };\n    target.off = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args.length === 0) {\n            target.callbacks = {};\n        }\n        else {\n            var eventName = args.shift();\n            var events = eventName.split(\" \");\n            events.map(function (eventName) { return delete target.callbacks[eventName]; });\n        }\n        return target;\n    };\n    return target;\n}\n\nfunction isPlainObject(object) {\n    // tslint:disable-next-line: one-variable-per-declaration\n    var proto, ctor, class2type = {}, toString = class2type.toString, // Object.prototype.toString\n    hasOwn = class2type.hasOwnProperty, fnToString = hasOwn.toString, // Object.toString/Function.toString\n    ObjectFunctionString = fnToString.call(Object); // 'function Object() { [native code] }'\n    if (!object || toString.call(object) !== '[object Object]') {\n        return false;\n    }\n    // According to the object created by `Object.create(null)` is no `prototype`\n    proto = Object.getPrototypeOf(object);\n    if (!proto) {\n        return true;\n    }\n    ctor = hasOwn.call(proto, 'constructor') && proto.constructor;\n    return typeof ctor === 'function' && fnToString.call(ctor) === ObjectFunctionString;\n}\nfunction extend() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var options;\n    var name;\n    var clone;\n    var copy;\n    var source;\n    var copyIsArray;\n    var target = arguments[0] || {};\n    var i = 1;\n    var length = arguments.length;\n    var deep = false;\n    if (typeof target === 'boolean') {\n        deep = target;\n        target = arguments[i] || {};\n        i++;\n    }\n    if (typeof target !== 'object' && typeof target !== 'function') {\n        target = {};\n    }\n    if (i === length) {\n        target = this;\n        i--;\n    }\n    for (; i < length; i++) {\n        // tslint:disable-next-line: no-conditional-assignment\n        if ((options = arguments[i]) !== null) {\n            for (name in options) {\n                if (options.hasOwnProperty(name)) {\n                    source = target[name];\n                    copy = options[name];\n                    if (target === copy) {\n                        continue;\n                    }\n                    // deep clone\n                    // tslint:disable-next-line: no-conditional-assignment\n                    if (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n                        if (copyIsArray) {\n                            copyIsArray = false;\n                            clone = source && Array.isArray(source) ? source : [];\n                        }\n                        else {\n                            clone = source && isPlainObject(source) ? source : {};\n                        }\n                        target[name] = extend(deep, clone, copy);\n                    }\n                    else if (copy !== undefined) {\n                        target[name] = copy;\n                    }\n                }\n            }\n        }\n    }\n    return target;\n}\n\nfunction usesify(addons) {\n    return function use(target) {\n        var _addons = Array.isArray(addons) ? addons : [addons];\n        _addons.map(function (addon) {\n            if (typeof addon === \"function\") {\n                addon(target);\n            }\n            else {\n                throw Error(\"[@amoy/components]error: addon \" + addons + \" must be a function;\");\n            }\n        });\n    };\n}\n\nfunction type(object) {\n    var class2type = {};\n    var type = class2type.toString.call(object);\n    var typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol';\n    if (object == null)\n        return object + '';\n    typeString.split(' ').forEach(function (type) {\n        class2type[\"[object \" + type + \"]\"] = type.toLowerCase();\n    });\n    var isObject = typeof object === 'object';\n    var isFn = typeof object === 'function';\n    return isObject || isFn ? class2type[type] || 'object' : typeof object;\n}\nfunction forin(object, fn) {\n    if (typeof object === 'object') {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                var value = object[key];\n                fn(key, value);\n            }\n        }\n    }\n}\nvar getValue = function (root, get) {\n    if (type(root) !== 'object')\n        return root;\n    var value = root;\n    var keyArr = get.split('.');\n    for (var i = 0, l = keyArr.length; i < l; i++) {\n        var v = keyArr[i];\n        if (v) {\n            if (value[v]) {\n                value = value[v];\n            }\n            else {\n                value = undefined;\n                break;\n            }\n        }\n    }\n    return value;\n};\nvar setValue = function (tar, key, value) {\n    if (type(tar) !== 'object') {\n        throw new Error('setValue tar muse be a object!');\n    }\n    else {\n        var pIndex = key.trim().indexOf('.');\n        if (pIndex > 0 && pIndex < key.length - 1) {\n            var keyArr = key.trim().split('.');\n            var _obj = tar;\n            var wrongKey = '';\n            for (var i = 0, l = keyArr.length - 1; i < l; i++) {\n                var v = keyArr[i];\n                if (typeof _obj[v] === 'object') {\n                    _obj = _obj[v];\n                }\n                else if (typeof _obj[v] === 'undefined') {\n                    wrongKey = v;\n                }\n            }\n            if (!wrongKey) {\n                var lastKey = keyArr[keyArr.length - 1];\n                _obj[lastKey] = value;\n            }\n            else {\n                throw new Error(\"the key(\" + wrongKey + \") is not in tar obj!\");\n            }\n        }\n        else {\n            tar[key.replace(/\\./g, '')] = value;\n        }\n    }\n};\n\nexport { eventify, extend, forin, getValue, setValue, type, usesify };\n//# sourceMappingURL=common.es.js.map\n","import { getValue } from '@amoy/common';\n\nvar EventBus = /** @class */ (function () {\n    function EventBus() {\n        this.handlers = [];\n    }\n    EventBus.prototype.add = function (handler) {\n        this.handlers.push(handler);\n        return this;\n    };\n    EventBus.prototype.del = function (handler) {\n        var _this = this;\n        if (!handler) {\n            this.handlers = [];\n        }\n        else {\n            this.handlers.map(function (value, index) {\n                value === handler && _this.handlers.splice(index, 1);\n            });\n        }\n        return this;\n    };\n    EventBus.prototype.fire = function (evObj, that) {\n        if (!this.handlers || !this.handlers.length)\n            return;\n        this.handlers.map(function (handler) {\n            if (typeof handler === 'function')\n                handler.bind(that)(evObj);\n        });\n        return this;\n    };\n    EventBus.prototype.clear = function () {\n        this.handlers = [];\n    };\n    return EventBus;\n}());\n\nvar u = {\n    getCurTargetByEv: function (evTarget, ev) {\n        var curTarget;\n        var maxZindex = 0;\n        if (getValue(evTarget, 'children.length')) {\n            evTarget.children.map(function (child) {\n                if (child.containsPoint) {\n                    if (child.containsPoint(ev.data.global) && child.zIndex >= maxZindex) {\n                        curTarget = child;\n                        maxZindex = child.zIndex;\n                    }\n                }\n            });\n        }\n        if (curTarget) {\n            var childCurTarget = u.getCurTargetByEv(curTarget, ev);\n            if (childCurTarget) {\n                curTarget = childCurTarget;\n            }\n        }\n        return curTarget || evTarget;\n    },\n    getFingers: function (ev) {\n        return getValue(ev, 'data.originalEvent.touches.length') || 1;\n    },\n    getPoint: function (ev, index) {\n        if (ev.data.pointerType === 'touch') {\n            var touches = ev.data.originalEvent.touches;\n            return {\n                x: Math.round(touches[index].pageX),\n                y: Math.round(touches[index].pageY),\n            };\n        }\n        else {\n            return {\n                x: Math.round(ev.data.global.x),\n                y: Math.round(ev.data.global.y),\n            };\n        }\n    },\n    getVector: function (p1, p2) {\n        var x = Math.round(p1.x - p2.x);\n        var y = Math.round(p1.y - p2.y);\n        return { x: x, y: y };\n    },\n    getLength: function (v1) {\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y);\n    },\n    getAngle: function (v1, v2) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!');\n            return;\n        }\n        // 判断方向，顺时针为 1 ,逆时针为 -1；\n        var direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1 : -1;\n        // 两个向量的模；\n        var len1 = this.getLength(v1);\n        var len2 = this.getLength(v2);\n        var mr = len1 * len2;\n        var dot;\n        var r;\n        if (mr === 0)\n            return 0;\n        // 通过数量积公式可以推导出：\n        // cos = (x1 * x2 + y1 * y2)/(|a| * |b|);\n        dot = v1.x * v2.x + v1.y * v2.y;\n        r = dot / mr;\n        if (r > 1)\n            r = 1;\n        if (r < -1)\n            r = -1;\n        // 解值并结合方向转化为角度值；\n        return Math.acos(r) * direction;\n    },\n    getAnchorPoint: function (target) {\n        return {\n            x: target.x,\n            y: target.y,\n        };\n    },\n};\n\nvar RTOUCH_SUPPORT_EVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    // 拖动\n    'drag',\n    'dragstart',\n    'dragend',\n    // 双指缩放\n    'pinch',\n    'pinchstart',\n    'pinchend',\n    // 双指旋转\n    'rotate',\n    'rotatestart',\n    'rotateend',\n    // 划动\n    'swipeleft',\n    'swiperight',\n    'swipeup',\n    'swipedown',\n    // 短点击\n    'shorttap',\n    'longtap',\n    // 单指缩放\n    'singlepinch',\n    'singlepinchstart',\n    'singlepinchend',\n    // 单指旋转\n    'singlerotate',\n    'singlerotatestart',\n    'singlerotateend',\n];\n// 挟持的原生事件\nvar ORIGIN_EVENT_MAP = [{\n        name: 'pointerdown',\n        fn: '_start',\n    }, {\n        name: 'pointermove',\n        fn: '_move',\n    }, {\n        name: 'pointerup',\n        fn: '_end',\n    }, {\n        name: 'pointerupoutside',\n        fn: '_end',\n    }];\n// 事件中心\nvar RTouch = /** @class */ (function () {\n    function RTouch(target) {\n        // 触摸手指数量\n        this.fingers = 0;\n        // 是否开始触摸\n        // 用于解决 精灵区域外 move 也被触发的问题\n        this.touching = false;\n        this.isSingleButton = false;\n        this.Bus = {};\n        this.target = target;\n        // 初始化事件中心\n        this.initEventBus();\n        // 事件挟持\n        this.bindOriginEvent();\n    }\n    RTouch.prototype.initEventBus = function () {\n        var _this = this;\n        RTOUCH_SUPPORT_EVENT.map(function (evName) {\n            Object.defineProperty(_this.Bus, evName, { value: new EventBus() });\n        });\n    };\n    RTouch.prototype.bindOriginEvent = function () {\n        var _this = this;\n        ORIGIN_EVENT_MAP.map(function (_a) {\n            var name = _a.name, fn = _a.fn;\n            _this.target.interactive = true;\n            _this.target.on(name, _this[fn], _this);\n        });\n    };\n    RTouch.prototype._start = function (ev) {\n        var _this = this;\n        this.touching = true;\n        this.startTime = Date.now();\n        this.fingers = u.getFingers(ev);\n        // 记录第一触控点\n        this.swipeStartPoint = this.startPoint = u.getPoint(ev, 0);\n        // 判断触控区域是否为单指操作的按钮\n        this.singleBasePoint = u.getAnchorPoint(this.target);\n        var curTarget = u.getCurTargetByEv(ev.target, ev);\n        this.isSingleButton = curTarget && (curTarget.name === 'singlebutton');\n        if (this.fingers === 1) {\n            // 单指且监听 singlePinch 时，计算向量模；\n            var startVector = u.getVector(this.startPoint, this.singleBasePoint);\n            this.singlePinchStartLength = u.getLength(startVector);\n        }\n        else if (this.fingers > 1) {\n            // 双指操作时，记录第二触控点\n            this.secondPoint = u.getPoint(ev, 1);\n            // 计算双指向量；\n            this.vector1 = u.getVector(this.secondPoint, this.startPoint);\n            // 计算向量模\n            this.pinchStartLength = u.getLength(this.vector1);\n        }\n        // 触发长按\n        this.longtapTimer = setTimeout(function () {\n            _this.fireEvent('longtap', {\n                origin: ev,\n            });\n            _this.longtapTimer = null;\n        }, 1000);\n        this.fireEvent('touchstart', {\n            origin: ev,\n        });\n    };\n    RTouch.prototype._move = function (ev) {\n        if (!this.touching)\n            return;\n        var curPoint = u.getPoint(ev, 0);\n        if (!this.startPoint)\n            this.startPoint = curPoint;\n        if (this.fingers > 1) {\n            // 双指操作， 触发 pinch 与 rotate\n            var curSecPoint = u.getPoint(ev, 1);\n            var vector2 = u.getVector(curSecPoint, curPoint);\n            var pinchLength = u.getLength(vector2);\n            if (this.pinchStartLength) {\n                this.eventStart('pinch', {\n                    origin: ev,\n                    delta: {\n                        scale: pinchLength / this.pinchStartLength,\n                    },\n                });\n                this.pinchStartLength = pinchLength;\n            }\n            if (this.vector1) {\n                this.eventStart('rotate', {\n                    delta: {\n                        rotate: u.getAngle(this.vector1, vector2),\n                    },\n                    origin: ev,\n                });\n                this.vector1 = vector2;\n            }\n        }\n        else {\n            // 触发 单指缩放\n            if (this.isSingleButton) {\n                var pinchV2 = u.getVector(curPoint, this.singleBasePoint);\n                var singlePinchLength = u.getLength(pinchV2);\n                this.eventStart('singlepinch', {\n                    delta: {\n                        scale: singlePinchLength / this.singlePinchStartLength,\n                        deltaX: curPoint.x - this.startPoint.x,\n                        deltaY: curPoint.y - this.startPoint.y,\n                    },\n                    origin: ev,\n                });\n                this.singlePinchStartLength = singlePinchLength;\n            }\n            // 触发 单指旋转;\n            if (this.isSingleButton) {\n                var rotateV1 = u.getVector(this.startPoint, this.singleBasePoint);\n                var rotateV2 = u.getVector(curPoint, this.singleBasePoint);\n                this.eventStart('singlerotate', {\n                    delta: {\n                        rotate: u.getAngle(rotateV1, rotateV2),\n                    },\n                    origin: ev,\n                });\n            }\n        }\n        // 触发 drag\n        this.eventStart('drag', {\n            delta: {\n                x: curPoint.x - this.startPoint.x,\n                y: curPoint.y - this.startPoint.y,\n            },\n            origin: ev,\n        });\n        this.fireEvent('touchmove', {\n            origin: ev,\n        });\n        this.startPoint = curPoint;\n    };\n    RTouch.prototype._end = function (ev) {\n        var _this = this;\n        var evArr = ['pinch', 'drag', 'rotate', 'singlerotate', 'singlepinch'];\n        this.touching = false;\n        this.fingers = u.getFingers(ev);\n        evArr.map(function (evName) {\n            _this.eventEnd(evName, {\n                origin: ev,\n                type: evName,\n            });\n        });\n        if (this.swipeStartPoint) {\n            var endPoint = {\n                x: Math.round(ev.data.global.x),\n                y: Math.round(ev.data.global.y),\n            };\n            var deltaX = endPoint.x - this.swipeStartPoint.x;\n            var deltaY = endPoint.y - this.swipeStartPoint.y;\n            var endTime = Date.now();\n            var eventType = '';\n            if (deltaX > 30 && Math.abs(deltaY) < 100) {\n                // 右划\n                eventType = 'swiperight';\n            }\n            else if (deltaX < -30 && Math.abs(deltaY) < 100) {\n                // 左划\n                eventType = 'swipeleft';\n            }\n            else if (deltaY > 30 && Math.abs(deltaX) < 100) {\n                // 下划\n                eventType = 'swipedown';\n            }\n            else if (deltaY < -30 && Math.abs(deltaX) < 100) {\n                // 上划\n                eventType = 'swipeup';\n            }\n            else if (Math.abs(deltaX) < 30 && Math.abs(deltaY) < 30) {\n                if (endTime - this.startTime < 500) {\n                    // 触发短点击\n                    eventType = 'shorttap';\n                }\n            }\n            if (eventType) {\n                this.fireEvent(eventType, {\n                    origin: ev,\n                });\n            }\n        }\n        this.fireEvent('touchend', {\n            origin: ev,\n        });\n        if (this.longtapTimer)\n            clearTimeout(this.longtapTimer);\n    };\n    RTouch.prototype.fireEvent = function (evName, ev) {\n        if (this.Bus[evName]) {\n            this.Bus[evName].fire(Object.assign(ev, {\n                type: evName,\n                stopPropagation: function () {\n                    ev.origin.stopPropagation();\n                },\n            }), this.target);\n        }\n    };\n    RTouch.prototype.destory = function () {\n        var _this = this;\n        ORIGIN_EVENT_MAP.map(function (_a) {\n            var name = _a.name, fn = _a.fn;\n            _this.target.off(name, _this[fn], _this);\n        });\n    };\n    RTouch.prototype.eventStart = function (evName, ev) {\n        var ing = evName + \"ing\";\n        var start = evName + \"start\";\n        if (!this[ing]) {\n            this.fireEvent(start, ev);\n            this[ing] = true;\n        }\n        else {\n            this.fireEvent(evName, ev);\n        }\n    };\n    RTouch.prototype.eventEnd = function (evName, ev) {\n        var ing = evName + \"ing\";\n        var end = evName + \"end\";\n        if (this[ing]) {\n            ev.type = end;\n            this.fireEvent(end, ev);\n            this[ing] = false;\n        }\n    };\n    RTouch.prototype.on = function (evName, handler) {\n        var _this = this;\n        var _evName = evName.trim().toLowerCase();\n        _evName.split(' ').map(function (name) {\n            _this.Bus[name].add(handler);\n        });\n        return this;\n    };\n    RTouch.prototype.off = function (evName, handler) {\n        var _this = this;\n        var _evName = evName.trim().toLowerCase();\n        _evName.split(' ').map(function (name) {\n            handler ? _this.Bus[name].del(handler) : _this.Bus[name].clear();\n        });\n        return this;\n    };\n    return RTouch;\n}());\n\nfunction on(target, evName, fn) {\n    if (RTOUCH_SUPPORT_EVENT.includes(evName)) {\n        if (!target['RTouch'])\n            target['RTouch'] = new RTouch(target);\n        target['RTouch'].on(evName, fn);\n    }\n    else {\n        target.interactive = true;\n        target.on(evName, fn);\n    }\n    return target;\n}\nfunction off(target, evName, fn) {\n    if (RTOUCH_SUPPORT_EVENT.includes(evName) && target['RTouch']) {\n        target['RTouch'].off(evName, fn);\n    }\n    else {\n        target.interactive = true;\n        target.off(evName, fn);\n    }\n    return target;\n}\nvar queryEvent = {\n    on: function (name, closure) {\n        if (name === void 0) { name = ''; }\n        if (closure === void 0) { closure = function () { }; }\n        var events = name.split(' ');\n        for (var i = 0; i < this.length; i++) {\n            for (var j = 0; j < events.length; j++) {\n                this[i].interactive = true;\n                on(this[i], events[j], closure);\n            }\n        }\n        return this;\n    },\n    off: function (name) {\n        if (name === void 0) { name = ''; }\n        var events = name.split(' ');\n        for (var i = 0; i < this.length; i++) {\n            for (var j = 0; j < events.length; j++) {\n                this[i].off(events[j]);\n                off(this[i], events[j]);\n            }\n        }\n        return this;\n    },\n};\n\nexport default queryEvent;\nexport { RTOUCH_SUPPORT_EVENT, off, on, queryEvent };\n//# sourceMappingURL=query-event.es.js.map\n","import * as instance from '../instance'\nimport { use, extend } from '../globals'\nimport { createQuery } from './createQuery'\nimport { queryEvent } from '@amoy/query-event'\n\nexport const query = (stage: any) => window.$ = createQuery(stage, query)\nquery.use = use\nquery.extend = extend\n\nquery.extend([\n    queryEvent,\n    instance,\n])\n"],"names":["get"],"mappings":"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"}