{"version":3,"file":"query.min.js","sources":["../lib/instance/index.ts","../lib/globals/use.ts","../lib/core/is.ts","../lib/core/createQuery.ts","../node_modules/@amoy/common/lib/index.ts","../node_modules/@amoy/query-event/lib/touch/eventBus.ts","../node_modules/@amoy/query-event/lib/touch/utils.ts","../node_modules/@amoy/query-event/lib/touch/index.ts","../node_modules/@amoy/query-event/lib/index.ts","../lib/core/index.ts","../lib/globals/extend.ts"],"sourcesContent":["/**\n * show\n * \n * show the selected item\n *\n * @module query/show\n *\n * @example\n *\n * $('text').show()\n */\nexport function show(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].visible = true\n    }\n    return this\n}\n\n/**\n * hide\n *\n * hide the selected item\n *\n * @module query/hide\n *\n * @example\n *\n * $('text').hide()\n */\nexport function hide(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].visible = false\n    }\n    return this\n}\n\n/**\n * get\n * \n * get item by index or get a collection for selected items\n * \n * @module query/get\n * \n * @param index\n *\n * @example\n *\n * $('text').get()\n * // or\n * $('text').get(0)\n */\nexport function get(this: any, index: number) {\n    if (index) {\n        return this[index]\n    } else {\n        const pure: any[] = []\n        for (let i = 0; i < this.length; i++) {\n            pure.push(this[i])\n        }\n        return pure\n    }\n}\n\n/**\n * width\n * \n * if param `width` is type of number,\n * `width()` will set selected items' width property\n * else return the first selected item's width value\n * \n * @module query/width\n * \n * @param { Number } width\n *\n * @example\n *\n * $('text').width()\n */\nexport function width(this: any, width: number) {\n    if (typeof width === 'number') {\n        for (let i = 0; i < this.length; i++) {\n            this[i].width = width\n        }\n    } else {\n        return this[0].width\n    }\n}\n\n/**\n * height\n *\n * if param `height` is type of number,\n * `height()` will set selected items' height property\n * else return the first selected item's height value\n * \n * @module query/height\n *\n * @param { Number } height\n *\n * @example\n *\n * $('text').height()\n */\nexport function height(this: any, height: number) {\n    if (typeof height === 'number') {\n        for (let i = 0; i < this.length; i++) {\n            this[i].height = height\n        }\n    } else {\n        return this[0].height\n    }\n}\n\n/**\n * position\n * \n * return the first selected item's coordanites\n * \n * @module query/position\n *\n * @example\n *\n * $('text').position()\n */\nexport function position(this: any) {\n    if (this[0]) {\n        return {\n            x: this[0].x,\n            y: this[0].y,\n        }\n    } else {\n        return null\n    }\n}\n\n/**\n * children\n * \n * return the first selected item's children\n * \n * @module query/children\n *\n * @example\n *\n * $('text').children()\n */\nexport function children(this: any) {\n    return this[0] ? this[0].children : []\n}\n\n/**\n * count\n * \n * return the selected items' count\n * \n * @module query/count\n *\n * @example\n *\n * $('text').count()\n */\nexport function count(this: any) {\n    return this.length\n}\n\n/**\n * first\n *\n * return the first selected item\n * \n * @module query/first\n *\n * @example\n *\n * $('text').first()\n *\n * @example\n *\n * $('text').first()\n */\nexport function first(this: any) {\n    return this[0]\n}\n\n/**\n * last\n *\n * return the last selected item\n * \n * @module query/last\n *\n * @example\n *\n * $('text').last()\n */\nexport function last(this: any) {\n    return this[this.length - 1]\n}\n\n/**\n * each\n * \n * @module query/each\n * \n * @param { Function } closure - executeable functoin\n *\n * @example\n *\n * $('text').each(item => {\n *     $(item).hide()\n * })\n */\nexport function each(this: any, closure: (item: any, index: number) => void) {\n    for (let i = 0; i < this.length; i++) {\n        closure(this[i], i)\n    }\n}\n\n/**\n * empty\n * \n * remove the selected items' children\n * \n * @module query/empty\n *\n * @example\n *\n * $('text').empty()\n */\nexport function empty(this: any) {\n    for (let i = 0; i < this.length; i++) {\n        this[i].removeChildren()\n    }\n}\n\n/**\n * parent\n * \n * if the first selected item's parent exist, return it, else return `null`\n * \n * @module query/parent\n * \n * @example\n * \n * $('text').parent()\n */\nexport function parent(this: any) {\n    return this[0] ? this[0].parent : null\n}\n\nexport function attr(this: any, key: string, value?: any) {\n    if (this[0] ) {  \n        if (value) {\n            this[0][key] = value\n            return this[0]\n        } else {\n            return this[0][key]\n        }\n    }\n} \n\nexport function find() {\n    console.log('find() not support yet')\n}\n\nexport function prev(this: any) {\n    if (this[0] && this[0].parent && this[0].parent.children.length) {\n        return this[0].parent.children.filter((v, i) => {\n            if (v === this[0]) {\n                return this[0].parent.children[i - 1]\n            }\n        })[0]\n    }\n}\n\nexport function next(this: any) {\n    if (this[0] && this[0].parent && this[0].parent.children.length) {\n        return this[0].parent.children.filter((v, i) => {\n            if (v === this[0]) {\n                return this[0].parent.children[i + 1]\n            }\n        })[0]\n    }\n}\n","export const fns: any[] = []\n\nexport function use(fn: () => void) {\n    fns.push(fn)\n}\n","export function sprite(target: any) {\n    return typeof target._anchor !== 'undefined' && typeof target._font === 'undefined'\n}\n\nexport function text(target: any) {\n    return typeof target._font === 'string'\n}\n\nexport function container(target: any) {\n    return typeof target.anchor === 'undefined'\n}\n","import * as is from './is'\nimport { fns } from '../globals/use'\n\nexport function createQuery(stage: any, query: typeof $) {\n    return (selector: any) => {\n        const com: any[] = []\n        const any = fns.reduce((prev: any, current: any) => current(prev, query), selector)\n        const type = typeof any\n\n        switch (type) {\n            case 'string':\n                selector = any.trim()\n                if (['view', 'sprite', 'text'].includes(selector)) {\n                    com.push(...getTypedItem(selector, get(stage)))\n                } else {\n                    const parsed = parseStringQuery(selector)\n                    parsed.map((item: any) => com.push(...findBy(item.key, item.value, get(stage))))\n                }\n                break\n            case 'object':\n                com.push(any)\n                break\n            default:\n                break\n        }\n\n        return Object.assign(com, query.prototype)\n    }\n}\n\nconst REG_PROP = /\\[(.*)\\=(.*)\\]/ // 匹配 `[${key}=${value}]` 形式字符串\n\nfunction parseStringQuery(query: string = '') {\n    const result: any[] = []\n    query.split(',').map((query: string) => {\n        query = query.trim()\n        const selectTypes = {\n            '#': ['id'],\n            '.': ['className', 'class', 'classname'],\n        }\n        for (const key in selectTypes) {\n            if (query.startsWith(key)) {\n                selectTypes[key].map((attrName) => {\n                    result.push({\n                        key: attrName,\n                        value: query.slice(1),\n                    })\n                })\n            }\n        }\n        if (REG_PROP.test(query)) {\n            const [key, value] = parsePropQuery(query)\n            result.push({\n                key,\n                value,\n            })\n        }\n    })\n    return result\n}\n\nfunction getTypedItem(type: string, source: any[]) {\n    return source.filter((item) => is[type](item))\n}\n\nfunction parsePropQuery(string: string) {\n    const [_, key, value] = string.match(REG_PROP) as any\n    return [key, value]\n}\n\nfunction get(object: any) {\n    const result: any[] = []\n    const walk = (object: any) => {\n        if (object.children.length > 0) {\n            result.push(...object.children)\n            object.children.map((child: any) => walk(child))\n        }\n    }\n    walk(object)\n    return result\n}\n\nfunction find(item: any, array: any[]) {\n    return array.filter((_item) => _item === item)\n}\n\nfunction findBy(key: string, value: any, array: any[]) {\n    return array.filter((item) => {\n        if (typeof item[key] === 'string') {\n            const vals = item[key].split(' ')\n            return vals.includes(value)\n        } else {\n            return item[key] === value \n        }\n    })\n}\n","export * from \"./eventify\"\nexport * from \"./extend\"\nexport * from \"./usesify\"\n\nexport function type(object: any) {\n    const class2type = {}\n    const type = class2type.toString.call(object)\n    const typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol'\n\n    if (object == null) return object + ''\n\n    typeString.split(' ').forEach((type) => {\n        class2type[`[object ${type}]`] = type.toLowerCase()\n    })\n\n    const isObject = typeof object === 'object'\n    const isFn = typeof object === 'function'\n    return isObject || isFn ? class2type[type] || 'object' : typeof object\n}\n\nexport function forin(object: object, fn: (key?: string, value?: any) => void) {\n    if (typeof object === 'object') {\n        for (const key in object) {\n            if (object.hasOwnProperty(key)) {\n                const value = object[key]\n                fn(key, value)\n            }\n        }\n    }\n}\n\nexport const getValue = (root: any, get: string) => {\n    if (type(root) !== 'object') return root\n    let value = root\n    const keyArr = get.split('.')\n    for (let i = 0, l = keyArr.length; i < l; i++) {\n        const v = keyArr[i]\n        if (v) {\n            if (value[v]) {\n                value = value[v]\n            } else {\n                value = undefined\n                break\n            }\n        }\n    }\n    return value\n}\n\nexport const setValue = (tar: any, key: string, value: any) => {\n    if (type(tar) !== 'object') {\n        throw new Error('setValue tar muse be a object!')\n    } else {\n        const pIndex = key.trim().indexOf('.')\n        if (pIndex > 0 && pIndex < key.length - 1) {\n            const keyArr = key.trim().split('.')\n            let _obj = tar\n            let wrongKey = ''\n            for (let i = 0, l = keyArr.length - 1; i < l; i++) {\n                const v = keyArr[i]\n                if (typeof _obj[v] === 'object') {\n                    _obj = _obj[v]\n                } else if (typeof _obj[v] === 'undefined') {\n                    wrongKey = v\n                }\n            }\n\n            if (!wrongKey) {\n                const lastKey = keyArr[keyArr.length - 1]\n                _obj[lastKey] = value\n            } else {\n                throw new Error(`the key(${wrongKey}) is not in tar obj!`)\n            }\n        } else {\n            tar[key.replace(/\\./g, '')] = value\n        }\n    }\n}\n","export default class EventBus {\n    private handlers: QueryEvent.Handler[] = []\n    public add(handler: QueryEvent.Handler) {\n        this.handlers.push(handler)\n        return this\n    }\n    public del(handler: QueryEvent.Handler) {\n        if (!handler) {\n            this.handlers = []\n        } else {\n            this.handlers.map((value, index) => {\n                value === handler && this.handlers.splice(index, 1)\n            })\n        }\n        return this\n    }\n    public fire(evObj: QueryEvent.RTouchEvent, that?: any) {\n        if (!this.handlers || !this.handlers.length) return\n        this.handlers.map((handler) => {\n            if (typeof handler === 'function') handler.bind(that)(evObj)\n        })\n        return this\n    }\n    public clear() {\n        this.handlers = []\n    }\n}\n","import { getValue } from '@amoy/common'\n\nconst u = { \n    getCurTargetByEv(evTarget: any, ev: QueryEvent.PixiEvent) {\n        let curTarget\n        let maxZindex = 0\n        if (getValue(evTarget, 'children.length')) {\n            evTarget.children.map((child) => {\n                if (child.containsPoint) {\n                    if (child.containsPoint(ev.data.global) && child.zIndex >= maxZindex) {\n                        curTarget = child\n                        maxZindex = child.zIndex\n                    }\n                }\n            })\n        }\n\n        if (curTarget) {\n            const childCurTarget = u.getCurTargetByEv(curTarget, ev)\n            if (childCurTarget) {\n                curTarget = childCurTarget\n            }\n        }\n        return curTarget || evTarget\n    },\n    getFingers(ev: QueryEvent.PixiEvent) {\n        return getValue(ev, 'data.originalEvent.touches.length') || 1\n    },\n    getPoint(ev: QueryEvent.PixiEvent, index: 0 | 1) {\n        if (ev.data.pointerType === 'touch') {\n            const touches = ev.data.originalEvent.touches\n            return {\n                x: Math.round(touches[index].pageX),\n                y: Math.round(touches[index].pageY),\n            }\n        } else {\n            return {\n                x: Math.round(ev.data.global.x),\n                y: Math.round(ev.data.global.y),\n            }\n        }\n    },\n    getVector(p1: QueryEvent.Point, p2: QueryEvent.Point) {\n        const x = Math.round(p1.x - p2.x)\n        const y = Math.round(p1.y - p2.y)\n        return { x, y }\n    },\n    getLength(v1: QueryEvent.Point) {\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y)\n    },\n    getAngle(v1: QueryEvent.Point, v2: QueryEvent.Point) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!')\n            return\n        }\n        // 判断方向，顺时针为 1 ,逆时针为 -1；\n        const direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1 : -1\n            // 两个向量的模；\n        const len1 = this.getLength(v1)\n        const len2 = this.getLength(v2)\n        const mr = len1 * len2\n        let dot\n        let r\n        if (mr === 0)return 0\n        // 通过数量积公式可以推导出：\n        // cos = (x1 * x2 + y1 * y2)/(|a| * |b|);\n        dot = v1.x * v2.x + v1.y * v2.y\n        r = dot / mr\n        if (r > 1)r = 1\n        if (r < -1)r = -1\n        // 解值并结合方向转化为角度值；\n        return Math.acos(r) * direction\n    },\n    getAnchorPoint(target: any) {\n        return {\n            x: target.x,\n            y: target.y,\n        }\n    },\n}\n\nexport default u\n","import * as PIXI from 'pixi.js'\nimport EventBus from './eventBus'\nimport u from './utils'\n\nexport const RTOUCH_SUPPORT_EVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    // 拖动\n    'drag',\n    'dragstart',\n    'dragend',\n    // 双指缩放\n    'pinch',\n    'pinchstart',\n    'pinchend',\n    // 双指旋转\n    'rotate',\n    'rotatestart',\n    'rotateend',\n    // 划动\n    'swipeleft',\n    'swiperight',\n    'swipeup',\n    'swipedown',\n    // 短点击\n    'shorttap',\n    'longtap',\n    // 单指缩放\n    'singlepinch',\n    'singlepinchstart',\n    'singlepinchend',\n    // 单指旋转\n    'singlerotate',\n    'singlerotatestart',\n    'singlerotateend',\n]\n\n// 挟持的原生事件\nconst ORIGIN_EVENT_MAP = [{\n    name: 'pointerdown',\n    fn: '_start',\n}, {\n    name: 'pointermove',\n    fn: '_move',\n}, {\n    name: 'pointerup',\n    fn: '_end',\n}, {\n    name: 'pointerupoutside',\n    fn: '_end',\n}]\n\n// 事件中心\n\nexport default class RTouch {\n    // 精灵\n    private target: PIXI.Sprite | PIXI.Graphics | PIXI.Text\n    // 触摸手指数量\n    private fingers: number = 0\n    // 第一触控点\n    private swipeStartPoint: QueryEvent.Point | null\n    private startPoint: QueryEvent.Point | null\n    private startTime: number\n    // 第二触控点\n    private secondPoint: QueryEvent.Point | null\n    // 初始向量\n    private vector1: QueryEvent.Point | null\n    // 初始向量模\n    private pinchStartLength: number | null\n    // 是否开始触摸\n    // 用于解决 精灵区域外 move 也被触发的问题\n    private touching: boolean = false\n\n    private isSingleButton: boolean = false\n    private singleBasePoint: QueryEvent.Point\n    private singlePinchStartLength: number\n\n    private longtapTimer\n    private Bus: {\n        [evName: string]: EventBus,\n    } = {}\n    constructor(target: PIXI.Sprite | PIXI.Graphics | PIXI.Text) {\n        this.target = target\n        // 初始化事件中心\n        this.initEventBus()\n        // 事件挟持\n        this.bindOriginEvent()\n    }\n    private initEventBus() {\n        RTOUCH_SUPPORT_EVENT.map((evName: string) => {\n            Object.defineProperty(this.Bus, evName, { value: new EventBus() })\n        })\n    }\n    private bindOriginEvent() {\n        ORIGIN_EVENT_MAP.map(({name, fn}) => {\n            this.target.interactive = true\n            this.target.on(name, this[fn], this)\n        })\n    }\n    public _start(ev: QueryEvent.PixiEvent) {\n        this.touching = true\n        this.startTime = Date.now()\n        this.fingers = u.getFingers(ev)\n        // 记录第一触控点\n        this.swipeStartPoint = this.startPoint = u.getPoint(ev, 0)\n        \n        // 判断触控区域是否为单指操作的按钮\n        this.singleBasePoint = u.getAnchorPoint(this.target)\n        const curTarget = u.getCurTargetByEv(ev.target, ev)\n        this.isSingleButton = curTarget && (curTarget.name === 'singlebutton')\n\n        if (this.fingers === 1) {\n            // 单指且监听 singlePinch 时，计算向量模；\n            const startVector = u.getVector(this.startPoint, this.singleBasePoint)\n            this.singlePinchStartLength = u.getLength(startVector)\n        } else if (this.fingers > 1) {\n            // 双指操作时，记录第二触控点\n            this.secondPoint = u.getPoint(ev, 1)\n            // 计算双指向量；\n            this.vector1 = u.getVector(this.secondPoint, this.startPoint)\n            // 计算向量模\n            this.pinchStartLength = u.getLength(this.vector1)\n        }\n\n        // 触发长按\n        this.longtapTimer = setTimeout(() => {\n            this.fireEvent('longtap', {\n                origin: ev,\n            })\n            this.longtapTimer = null\n        }, 1000)\n\n        this.fireEvent('touchstart', {\n            origin: ev,\n        })\n    }\n    public _move(ev: QueryEvent.PixiEvent) {\n        if (!this.touching) return\n        const curPoint = u.getPoint(ev, 0)\n        \n        if (!this.startPoint) this.startPoint = curPoint\n        if (this.fingers > 1) {\n            // 双指操作， 触发 pinch 与 rotate\n            const curSecPoint = u.getPoint(ev, 1)\n            const vector2 = u.getVector(curSecPoint, curPoint)\n            const pinchLength = u.getLength(vector2)\n\n            if (this.pinchStartLength) {\n                this.eventStart('pinch', {\n                    origin: ev,\n                    delta: {\n                        scale: pinchLength / this.pinchStartLength,\n                    },\n                })\n                this.pinchStartLength = pinchLength\n            }\n\n            if (this.vector1) {\n                this.eventStart('rotate', {\n                    delta: {\n                        rotate: u.getAngle(this.vector1, vector2),\n                    },\n                    origin: ev,\n                })\n                this.vector1 = vector2\n            }\n        } else {\n            // 触发 单指缩放\n            if (this.isSingleButton) {\n                const pinchV2 = u.getVector(curPoint, this.singleBasePoint)\n                const singlePinchLength = u.getLength(pinchV2)\n\n                this.eventStart('singlepinch', {\n                    delta: {\n                        scale: singlePinchLength / this.singlePinchStartLength,\n                        deltaX: curPoint.x - this.startPoint.x,\n                        deltaY: curPoint.y - this.startPoint.y,\n                    },\n                    origin: ev,\n                })\n                this.singlePinchStartLength = singlePinchLength\n            }\n            // 触发 单指旋转;\n            if (this.isSingleButton) {\n                const rotateV1 = u.getVector(this.startPoint, this.singleBasePoint)\n                const rotateV2 = u.getVector(curPoint, this.singleBasePoint)\n\n                this.eventStart('singlerotate', {\n                    delta: {\n                        rotate: u.getAngle(rotateV1, rotateV2),\n                    },\n                    origin: ev,\n                })\n            }\n        }\n\n        // 触发 drag\n        this.eventStart('drag', {\n            delta: {\n                x: curPoint.x - this.startPoint.x,\n                y: curPoint.y - this.startPoint.y,\n            },\n            origin: ev,\n        })\n\n        this.fireEvent('touchmove', {\n            origin: ev,\n        })\n\n        this.startPoint = curPoint\n    }\n    public _end(ev: QueryEvent.PixiEvent) {\n        const evArr = ['pinch', 'drag', 'rotate', 'singlerotate', 'singlepinch']\n        this.touching = false\n        this.fingers = u.getFingers(ev)\n\n        evArr.map((evName: string) => {\n            this.eventEnd(evName, {\n                origin: ev,\n                type: evName,\n            })\n        })\n\n        if (this.swipeStartPoint) {\n            const endPoint = {\n                x: Math.round(ev.data.global.x),\n                y: Math.round(ev.data.global.y),\n            }\n            const deltaX = endPoint.x - this.swipeStartPoint.x\n            const deltaY = endPoint.y - this.swipeStartPoint.y\n            const endTime = Date.now()\n            let eventType: string = ''\n            if (deltaX > 30 && Math.abs(deltaY) < 100) {\n                // 右划\n                eventType = 'swiperight'\n            } else if (deltaX < -30 && Math.abs(deltaY) < 100) {\n                // 左划\n                eventType = 'swipeleft'\n            } else if (deltaY > 30 && Math.abs(deltaX) < 100) {\n                // 下划\n                eventType = 'swipedown'\n            } else if (deltaY < -30 && Math.abs(deltaX) < 100) {\n                // 上划\n                eventType = 'swipeup'\n            } else if (Math.abs(deltaX) < 30 && Math.abs(deltaY) < 30 ) {\n                if (endTime - this.startTime < 500) {\n                    // 触发短点击\n                    eventType = 'shorttap'\n                }\n            }\n\n            if (eventType) {\n                this.fireEvent(eventType, {\n                    origin: ev,\n                })\n            }\n        }\n\n        this.fireEvent('touchend', {\n            origin: ev,\n        })\n\n        if (this.longtapTimer) clearTimeout(this.longtapTimer)\n    }\n    private fireEvent(evName: string, ev: {\n        origin: QueryEvent.PixiEvent,\n        [any: string]: any,\n    }) {\n        if (this.Bus[evName]) {\n            this.Bus[evName].fire(Object.assign(ev, {\n                type: evName,\n                stopPropagation() {\n                    ev.origin.stopPropagation()\n                },\n            }), this.target)\n        }\n    }\n    public destory() {\n        ORIGIN_EVENT_MAP.map(({name, fn}) => {\n            this.target.off(name, this[fn], this)\n        })\n    }\n\n    private eventStart(evName: string, ev: {\n        origin: QueryEvent.PixiEvent,\n        [any: string]: any,\n    }) {\n        const ing = `${evName}ing`\n        const start = `${evName}start`\n        if (!this[ing]) {\n            this.fireEvent(start, ev)\n            this[ing] = true\n        } else {\n            this.fireEvent(evName, ev)\n        }\n    }\n\n    private eventEnd(evName: string, ev: QueryEvent.RTouchEvent) {\n        const ing = `${evName}ing`\n        const end = `${evName}end`\n        if (this[ing]) {\n            ev.type = end\n            this.fireEvent(end, ev)\n            this[ing] = false\n        }\n    }\n\n    public on(evName: string, handler: QueryEvent.Handler) {\n        const _evName = evName.trim().toLowerCase()\n        _evName.split(' ').map((name: string) => {\n            this.Bus[name].add(handler)\n        })\n        return this\n    }\n\n    public off(evName: string, handler?: QueryEvent.Handler) {\n        const _evName = evName.trim().toLowerCase()\n        _evName.split(' ').map((name: string) => {\n            handler ? this.Bus[name].del(handler) : this.Bus[name].clear()\n        })\n        return this\n    }\n}\n","import RTouch, { RTOUCH_SUPPORT_EVENT } from './touch'\nexport { RTOUCH_SUPPORT_EVENT } from './touch'\n\ntype callback = (ev: QueryEvent.RTouchEvent) => void\n\nexport function on(target: any, evName: string, fn: callback) {\n    if (RTOUCH_SUPPORT_EVENT.includes(evName)) {\n        if (!target['RTouch']) target['RTouch'] = new RTouch(target)\n        target['RTouch'].on(evName, fn)\n    } else {\n        target.interactive = true\n        target.on(evName, fn)\n    }\n    return target\n}\n\nexport function off(target: any, evName: string, fn?: callback) {\n    if (RTOUCH_SUPPORT_EVENT.includes(evName) && target['RTouch']) {\n        target['RTouch'].off(evName, fn)\n    } else {\n        target.interactive = true\n        target.off(evName, fn)\n    }\n    return target\n}\n\nexport const queryEvent = {\n    on(this: any, name: string = '', closure: () => void = () => { }) {\n        const events = name.split(' ')\n        for (let i = 0; i < this.length; i++) {\n            for (let j = 0; j < events.length; j++) {\n                this[i].interactive = true\n                on(this[i], events[j], closure)\n            }\n        }\n        return this\n    },\n    off(this: any, name: string = '') {\n        const events = name.split(' ')\n        for (let i = 0; i < this.length; i++) {\n            for (let j = 0; j < events.length; j++) {\n                this[i].off(events[j])\n                off(this[i], events[j])\n            }\n        }\n        return this\n    },\n}\n\nexport default queryEvent\n","import * as instance from '../instance'\nimport { use, extend } from '../globals'\nimport { createQuery } from './createQuery'\nimport { queryEvent } from '@amoy/query-event'\n\nexport const query = (stage: any) => window.$ = createQuery(stage, query)\nquery.use = use\nquery.extend = extend\n\nquery.extend([\n    queryEvent,\n    instance,\n])\n","/**\n * extend\n * \n * query extend method\n * \n * @module query/extend\n * \n * @param { Object | Array } target - extend target\n * \n * @example\n * \n * import query from '@amoy/query'\n * \n * query.extend({\n *     hide() {\n *         for (let i = 0; i < this.length; i++) {\n *             // hide all the selected items\n *             this[i].visible = false\n *         }\n *     },\n * })\n * \n * $('some query').hide()\n */\nexport function extend(this: any, target: any = []) {\n    if (Array.isArray(target)) {\n        target.map((item) => extend.bind(this)(item))\n    } else if (typeof target === 'object') {\n        Object.assign(this.prototype, target)\n    } else {\n        console.error(`query extension's type must be \"object\" or \"object[]\"`)\n    }\n}\n"],"names":["i","this","length","visible","index","pure","push","width","height","x","y","children","closure","removeChildren","parent","key","value","console","log","filter","v","_this","fns","target","_anchor","_font","anchor","createQuery","stage","query","selector","com","any","reduce","prev","current","trim","includes","type","source","item","is","getTypedItem","get","result","split","map","selectTypes","#",".","startsWith","attrName","slice","REG_PROP","test","_a","string","parseStringQuery","array","findBy","Object","assign","prototype","object","walk","child","getValue","root","class2type","toString","call","forEach","toLowerCase","keyArr","l","undefined","EventBus","handler","handlers","splice","evObj","that","bind","u","getCurTargetByEv","evTarget","ev","curTarget","maxZindex","containsPoint","data","global","zIndex","childCurTarget","getFingers","getPoint","pointerType","Math","round","touches","originalEvent","pageX","pageY","getVector","p1","p2","getLength","v1","sqrt","getAngle","v2","r","direction","mr","acos","error","getAnchorPoint","RTOUCH_SUPPORT_EVENT","ORIGIN_EVENT_MAP","name","fn","RTouch","evName","defineProperty","Bus","interactive","on","touching","startTime","Date","now","fingers","swipeStartPoint","startPoint","singleBasePoint","isSingleButton","startVector","singlePinchStartLength","secondPoint","vector1","pinchStartLength","longtapTimer","setTimeout","fireEvent","origin","curPoint","curSecPoint","vector2","pinchLength","eventStart","delta","scale","rotate","pinchV2","singlePinchLength","deltaX","deltaY","rotateV1","rotateV2","eventEnd","endPoint","endTime","eventType","abs","clearTimeout","fire","stopPropagation","off","ing","start","end","add","del","clear","initEventBus","bindOriginEvent","queryEvent","events","j","window","$","use","extend","Array","isArray","instance"],"mappings":"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"}