(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("@amoy/query-event")):"function"==typeof define&&define.amd?define(["@amoy/query-event"],b):(a=a||self,a.query=b(a.queryEvent))})(this,function(a){'use strict';/**
     * show
     *
     * show the selected item
     *
     * @module query/show
     *
     * @example
     *
     * $('text').show()
     */ /**
     * hide
     *
     * hide the selected item
     *
     * @module query/hide
     *
     * @example
     *
     * $('text').hide()
     */ /**
     * get
     *
     * get item by index or get a collection for selected items
     *
     * @module query/get
     *
     * @param index
     *
     * @example
     *
     * $('text').get()
     * // or
     * $('text').get(0)
     */ /**
     * width
     *
     * if param `width` is type of number,
     * `width()` will set selected items' width property
     * else return the first selected item's width value
     *
     * @module query/width
     *
     * @param { Number } width
     *
     * @example
     *
     * $('text').width()
     */function b(a){if("number"==typeof a)for(var b=0;b<this.length;b++)this[b].width=a;else return this[0].width}/**
     * height
     *
     * if param `height` is type of number,
     * `height()` will set selected items' height property
     * else return the first selected item's height value
     *
     * @module query/height
     *
     * @param { Number } height
     *
     * @example
     *
     * $('text').height()
     */function c(a){if("number"==typeof a)for(var b=0;b<this.length;b++)this[b].height=a;else return this[0].height}/**
     * position
     *
     * return the first selected item's coordanites
     *
     * @module query/position
     *
     * @example
     *
     * $('text').position()
     */ /**
     * extend
     *
     * query extend method
     *
     * @module query/extend
     *
     * @param { Object | Array } target - extend target
     *
     * @example
     *
     * import query from '@amoy/query'
     *
     * query.extend({
     *     hide() {
     *         for (let i = 0; i < this.length; i++) {
     *             // hide all the selected items
     *             this[i].visible = false
     *         }
     *     },
     * })
     *
     * $('some query').hide()
     */function d(a){var b=this;void 0===a&&(a=[]),Array.isArray(a)?a.map(function(a){return d.bind(b)(a)}):"object"==typeof a?Object.assign(this.prototype,a):console.error("query extension's type must be \"object\" or \"object[]\"")}function e(a,b){return function(c){var d=[],e=l.reduce(function(a,c){return c(a,b)},c);// @ts-ignore
switch(typeof e){case"string":if(c=e.trim(),["container","sprite","text"].includes(c))d.push.apply(d,g(c,i(a)));else{var h=f(c);h.map(function(b){return d.push.apply(d,j(b.key,b.value,i(a)))})}break;case"object":d.push(e);break;default:}return Object.assign(d,b.prototype)}}// 匹配 `[${key}=${value}]` 形式字符串
function f(a){void 0===a&&(a="");var b=[];return a.split(",").map(function(a){a=a.trim();var c={"#":"id",".":"className"};for(var d in c)a.startsWith(d)&&b.push({key:c[d],value:a.slice(1)});if(n.test(a)){var e=h(a),d=e[0],f=e[1];b.push({key:d,value:f})}}),b}function g(a,b){return b.filter(function(b){return m[a](b)})}function h(a){var b=a.match(n),c=b[0],d=b[1],e=b[2];return[d,e]}function i(a){var b=[],c=function(a){0<a.children.length&&(b.push.apply(b,a.children),a.children.map(function(a){return c(a)}))};return c(a),b}function j(a,b,c){return c.filter(function(c){return c[a]===b})}/**
     * query
     *
     * @module query/query
     *
     * @param { Object } stage - PIXI stage
     *
     * @example
     *
     * import { Application as Game } from 'pixi.js'
     *
     * const game = new Game({
     *     width: window.innerWidth,
     *     height: window.innerHeight,
     * })
     *
     * query(game.stage)
     * //then you can use as
     * $('sprite').hide()
     * // or
     * $('text').on('tap', () => {})
     */ // @ts-ignore
a=a&&a.hasOwnProperty("default")?a["default"]:a;var k=/*#__PURE__*/Object.freeze({show:function(){for(var a=0;a<this.length;a++)this[a].visible=!0;return this},hide:function(){for(var a=0;a<this.length;a++)this[a].visible=!1;return this},get:function(a){if(a)return this[a];for(var b=[],c=0;c<this.length;c++)b.push(this[c]);return b},width:b,height:c,position:function(){return{x:this[0]?this[0].x:0,y:this[0]?this[0].y:0}}/**
     * children
     *
     * return the first selected item's children
     *
     * @module query/children
     *
     * @example
     *
     * $('text').children()
     */,children:function(){return this[0]?this[0].children:[]}/**
     * count
     *
     * return the selected items' count
     *
     * @module query/count
     *
     * @example
     *
     * $('text').count()
     */,count:function(){return this.length}/**
     * first
     *
     * return the first selected item
     *
     * @module query/first
     *
     * @example
     *
     * $('text').first()
     *
     * @example
     *
     * $('text').first()
     */,first:function(){return this[0]}/**
     * last
     *
     * return the last selected item
     *
     * @module query/last
     *
     * @example
     *
     * $('text').last()
     */,last:function(){return this[this.length-1]}/**
     * each
     *
     * @module query/each
     *
     * @param { Function } closure - executeable functoin
     *
     * @example
     *
     * $('text').each(item => {
     *     $(item).hide()
     * })
     */,each:function(a){for(var b=0;b<this.length;b++)a(this[b],b)}/**
     * empty
     *
     * remove the selected items' children
     *
     * @module query/empty
     *
     * @example
     *
     * $('text').empty()
     */,empty:function(){for(var a=0;a<this.length;a++)this[a].removeChildren()}/**
     * parent
     *
     * if the first selected item's parent exist, return it, else return `null`
     *
     * @module query/parent
     *
     * @example
     *
     * $('text').parent()
     */,parent:function(){return this[0]?this[0].parent:null},text:function(){return console.log("text() not support yet"),this[0]&&this[0]._text&&this[0]._text},css:function(){console.log("css() not support yet")},find:function(){console.log("find() not support yet")},offset:function(){console.log("offset() not support yet")},prev:function(){console.log("prev() not support yet")},next:function(){console.log("next() not support yet")}}),l=[],m=/*#__PURE__*/Object.freeze({sprite:function(a){return"undefined"!=typeof a._anchor&&"undefined"==typeof a._font},text:function(a){return"string"==typeof a._font},container:function(a){return"undefined"==typeof a.anchor}}),n=/\[(.*)\=(.*)\]/,o=function(a){return window.$=e(a,o)};return o.use=function(a){l.push(a)},o.extend=d,o.extend([a,k]),o});
//# sourceMappingURL=query.min.js.map
