function extend(a){void 0===a&&(a={}),Object.assign(this.prototype,a)}function createQuery(a,b){return function(c){var d=[];switch(typeof c){case"string":var e=parseStringQuery(c);e.map(function(b){d.push.apply(d,findBy(b.key,b.value,get(a)))});break;case"object":d.push.apply(d,find(c,get(a)));break;default:}return Object.assign(d,b.prototype)}}var REG_PROP=/\[(.*)\=(.*)\]/;// 匹配 `[${key}=${value}]` 形式字符串
function parseStringQuery(a){void 0===a&&(a="");var b=[];return a.split(",").map(function(a){if(a=a.trim(),a.startsWith(".")&&b.push({key:"name",value:a.slice(1)}),REG_PROP.test(a)){var c=parsePropQuery(a),d=c[0],e=c[1];b.push({key:d,value:e})}}),b}function parsePropQuery(a){var b=a.match(REG_PROP),c=b[0],d=b[1],e=b[2];return[d,e]}function get(a){var b=[],c=function(a){0<a.children.length&&(b.push.apply(b,a.children),a.children.map(function(a){return c(a)}))};return c(a),b}function find(a,b){return b.filter(function(b){return b===a})}function findBy(a,b,c){return c.filter(function(c){return c[a]===b})}function on(a,b){void 0===a&&(a=""),void 0===b&&(b=function(){});for(var c=a.split(" "),d=0;d<this.length;d++)for(var e=0;e<c.length;e++)this[d].interactive=!0,this[d].on(c[e],b)}function off(a){void 0===a&&(a="");for(var b=a.split(" "),c=0;c<this.length;c++)for(var d=0;d<b.length;d++)this[c].off(b[d])}var extension=/*#__PURE__*/Object.freeze({on:on,off:off}),query=function(a){return window.$=createQuery(a,query)};// @ts-ignore
query.extend=extend,query.extend(extension);export default query;
//# sourceMappingURL=query.es.min.js.map
