import queryEvent from"@amoy/query-event";/**
 * show
 *
 * show the selected item
 *
 * @module query/show
 *
 * @example
 *
 * $('text').show()
 */function show(){for(var a=0;a<this.length;a++)this[a].visible=!0;return this}/**
 * hide
 *
 * hide the selected item
 *
 * @module query/hide
 *
 * @example
 *
 * $('text').hide()
 */function hide(){for(var a=0;a<this.length;a++)this[a].visible=!1;return this}/**
 * get
 *
 * get item by index or get a collection for selected items
 *
 * @module query/get
 *
 * @param index
 *
 * @example
 *
 * $('text').get()
 * // or
 * $('text').get(0)
 */function get(a){if(a)return this[a];for(var b=[],c=0;c<this.length;c++)b.push(this[c]);return b}/**
 * width
 *
 * if param `width` is type of number,
 * `width()` will set selected items' width property
 * else return the first selected item's width value
 *
 * @module query/width
 *
 * @param { Number } width
 *
 * @example
 *
 * $('text').width()
 */function width(a){if("number"==typeof a)for(var b=0;b<this.length;b++)this[b].width=a;else return this[0].width}/**
 * height
 *
 * if param `height` is type of number,
 * `height()` will set selected items' height property
 * else return the first selected item's height value
 *
 * @module query/height
 *
 * @param { Number } height
 *
 * @example
 *
 * $('text').height()
 */function height(a){if("number"==typeof a)for(var b=0;b<this.length;b++)this[b].height=a;else return this[0].height}/**
 * position
 *
 * return the first selected item's coordanites
 *
 * @module query/position
 *
 * @example
 *
 * $('text').position()
 */function position(){return{x:this[0]?this[0].x:0,y:this[0]?this[0].y:0}}/**
 * children
 *
 * return the first selected item's children
 *
 * @module query/children
 *
 * @example
 *
 * $('text').children()
 */function children(){return this[0]?this[0].children:[]}/**
 * count
 *
 * return the selected items' count
 *
 * @module query/count
 *
 * @example
 *
 * $('text').count()
 */function count(){return this.length}/**
 * first
 *
 * return the first selected item
 *
 * @module query/first
 *
 * @example
 *
 * $('text').first()
 *
 * @example
 *
 * $('text').first()
 */function first(){return this[0]}/**
 * last
 *
 * return the last selected item
 *
 * @module query/last
 *
 * @example
 *
 * $('text').last()
 */function last(){return this[this.length-1]}/**
 * each
 *
 * @module query/each
 *
 * @param { Function } closure - executeable functoin
 *
 * @example
 *
 * $('text').each(item => {
 *     $(item).hide()
 * })
 */function each(a){for(var b=0;b<this.length;b++)a(this[b],b)}/**
 * empty
 *
 * remove the selected items' children
 *
 * @module query/empty
 *
 * @example
 *
 * $('text').empty()
 */function empty(){for(var a=0;a<this.length;a++)this[a].removeChildren()}/**
 * parent
 *
 * if the first selected item's parent exist, return it, else return `null`
 *
 * @module query/parent
 *
 * @example
 *
 * $('text').parent()
 */function parent(){return this[0]?this[0].parent:null}function text(){return console.log("text() not support yet"),this[0]&&this[0]._text&&this[0]._text}function css(){console.log("css() not support yet")}function find(){console.log("find() not support yet")}function offset(){console.log("offset() not support yet")}function prev(){console.log("prev() not support yet")}function next(){console.log("next() not support yet")}var instance=/*#__PURE__*/Object.freeze({show:show,hide:hide,get:get,width:width,height:height,position:position,children:children,count:count,first:first,last:last,each:each,empty:empty,parent:parent,text:text,css:css,find:find,offset:offset,prev:prev,next:next}),fns=[];function use(a){fns.push(a)}/**
 * extend
 *
 * query extend method
 *
 * @module query/extend
 *
 * @param { Object | Array } target - extend target
 *
 * @example
 *
 * import query from '@amoy/query'
 *
 * query.extend({
 *     hide() {
 *         for (let i = 0; i < this.length; i++) {
 *             // hide all the selected items
 *             this[i].visible = false
 *         }
 *     },
 * })
 *
 * $('some query').hide()
 */function extend(a){var b=this;void 0===a&&(a=[]),Array.isArray(a)?a.map(function(a){return extend.bind(b)(a)}):"object"==typeof a?Object.assign(this.prototype,a):console.error("query extension's type must be \"object\" or \"object[]\"")}function sprite(a){return"undefined"!=typeof a._anchor&&"undefined"==typeof a._font}function text$1(a){return"string"==typeof a._font}function container(a){return"undefined"==typeof a.anchor}var is=/*#__PURE__*/Object.freeze({sprite:sprite,text:text$1,container:container});function createQuery(a,b){return function(c){var d=[],e=fns.reduce(function(a,c){return c(a,b)},c);// @ts-ignore
switch(typeof e){case"string":if(c=e.trim(),["container","sprite","text"].includes(c))d.push.apply(d,getTypedItem(c,get$1(a)));else{var f=parseStringQuery(c);f.map(function(b){return d.push.apply(d,findBy(b.key,b.value,get$1(a)))})}break;case"object":d.push(e);break;default:}return Object.assign(d,b.prototype)}}var REG_PROP=/\[(.*)\=(.*)\]/;// 匹配 `[${key}=${value}]` 形式字符串
function parseStringQuery(a){void 0===a&&(a="");var b=[];return a.split(",").map(function(a){a=a.trim();var c={"#":"id",".":"className"};for(var d in c)a.startsWith(d)&&b.push({key:c[d],value:a.slice(1)});if(REG_PROP.test(a)){var e=parsePropQuery(a),d=e[0],f=e[1];b.push({key:d,value:f})}}),b}function getTypedItem(a,b){return b.filter(function(b){return is[a](b)})}function parsePropQuery(a){var b=a.match(REG_PROP),c=b[0],d=b[1],e=b[2];return[d,e]}function get$1(a){var b=[],c=function(a){0<a.children.length&&(b.push.apply(b,a.children),a.children.map(function(a){return c(a)}))};return c(a),b}function findBy(a,b,c){return c.filter(function(c){return c[a]===b})}/**
 * query
 *
 * @module query/query
 *
 * @param { Object } stage - PIXI stage
 *
 * @example
 *
 * import { Application as Game } from 'pixi.js'
 *
 * const game = new Game({
 *     width: window.innerWidth,
 *     height: window.innerHeight,
 * })
 *
 * query(game.stage)
 * //then you can use as
 * $('sprite').hide()
 * // or
 * $('text').on('tap', () => {})
 */ // @ts-ignore
var query=function(a){return window.$=createQuery(a,query)};query.use=use,query.extend=extend,query.extend([queryEvent,instance]);export default query;
//# sourceMappingURL=query.es.min.js.map
